namespace proverb
{
    /// <summary>
    /// 문제 선택 화면
    /// </summary>
    public partial class Form1 : Form
    {
        private int level;

        /// <summary>
        /// 생성자함수
        /// </summary>
        public Form1()
        {
            InitializeComponent();
        }

        /// <summary>
        /// 폼 열림 이벤트 함수
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void Form1_Load(object sender, EventArgs e)
        {
            LoadLevel();
        }

        /// <summary>
        /// 스테이지 1 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button1_Click(object sender, EventArgs e)
        {
            SelectLevel(1);
        }

        /// <summary>
        /// 스테이지 2 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button2_Click(object sender, EventArgs e)
        {
            SelectLevel(2);
        }

        /// <summary>
        /// 스테이지 3 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button3_Click(object sender, EventArgs e)
        {
            SelectLevel(3);
        }

        /// <summary>
        /// 스테이지 4 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button4_Click(object sender, EventArgs e)
        {
            SelectLevel(4);
        }

        /// <summary>
        /// 스테이지 5 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button5_Click(object sender, EventArgs e)
        {
            SelectLevel(5);
        }

        /// <summary>
        /// 스테이지 6 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button6_Click(object sender, EventArgs e)
        {
            SelectLevel(6);
        }

        /// <summary>
        /// 스테이지 7 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button7_Click(object sender, EventArgs e)
        {
            SelectLevel(7);
        }

        /// <summary>
        /// 스테이지 8 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button8_Click(object sender, EventArgs e)
        {
            SelectLevel(8);
        }

        /// <summary>
        /// 스테이지 9 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button9_Click(object sender, EventArgs e)
        {
            SelectLevel(9);
        }

        /// <summary>
        /// 스테이지 10 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button10_Click(object sender, EventArgs e)
        {
            SelectLevel(10);
        }

        /// <summary>
        /// 스테이지 11 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button11_Click(object sender, EventArgs e)
        {
            SelectLevel(11);
        }

        /// <summary>
        /// 스테이지 12 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button12_Click(object sender, EventArgs e)
        {
            SelectLevel(12);
        }

        /// <summary>
        /// 스테이지 13 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button13_Click(object sender, EventArgs e)
        {
            SelectLevel(13);
        }

        /// <summary>
        /// 스테이지 14 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button14_Click(object sender, EventArgs e)
        {
            SelectLevel(14);
        }

        /// <summary>
        /// 스테이지 15 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button15_Click(object sender, EventArgs e)
        {
            SelectLevel(15);
        }

        /// <summary>
        /// 스테이지 16 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button16_Click(object sender, EventArgs e)
        {
            SelectLevel(16);
        }

        /// <summary>
        /// 스테이지 17 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button17_Click(object sender, EventArgs e)
        {
            SelectLevel(17);

        }

        /// <summary>
        /// 스테이지 18 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button18_Click(object sender, EventArgs e)
        {
            SelectLevel(18);
        }

        /// <summary>
        /// 스테이지 19 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button19_Click(object sender, EventArgs e)
        {
            SelectLevel(19);
        }

        /// <summary>
        /// 스테이지 20 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button20_Click(object sender, EventArgs e)
        {
            SelectLevel(20);
        }

        /// <summary>
        /// 스테이지 21 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button21_Click(object sender, EventArgs e)
        {
            SelectLevel(21);
        }

        /// <summary>
        /// 스테이지 22 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button22_Click(object sender, EventArgs e)
        {
            SelectLevel(22);
        }

        /// <summary>
        /// 스테이지 23 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button23_Click(object sender, EventArgs e)
        {
            SelectLevel(23);
        }

        /// <summary>
        /// 스테이지 24 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button24_Click(object sender, EventArgs e)
        {
            SelectLevel(24);

        }

        /// <summary>
        /// 스테이지 25 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button25_Click(object sender, EventArgs e)
        {
            SelectLevel(25);
        }

        /// <summary>
        /// 스테이지 26 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button26_Click(object sender, EventArgs e)
        {
            SelectLevel(26);
        }

        /// <summary>
        /// 스테이지 27 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button27_Click(object sender, EventArgs e)
        {
            SelectLevel(27);
        }

        /// <summary>
        /// 스테이지 28 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button28_Click(object sender, EventArgs e)
        {
            SelectLevel(28);
        }

        /// <summary>
        /// 스테이지 29 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button29_Click(object sender, EventArgs e)
        {
            SelectLevel(29);
        }

        /// <summary>
        /// 스테이지 30 클릭 이벤트
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void button30_Click(object sender, EventArgs e)
        {
            SelectLevel(30);
        }


        /// <summary>
        /// 파일 생성 메서드
        /// </summary>
        private void CreateFile()
        {
            string path = @".\level.txt";
            bool fileExist = File.Exists(path);

            if (!fileExist)
            {
                using (File.Create(path))
                {

                }
                SaveLevel();
            }
            else
            {
                MessageBox.Show("이미 파일이 존재합니다.");
            }
        }

        /// <summary>
        /// 레벨 불러오기 메서드
        /// </summary>
        private void LoadLevel()
        {
            string path = @".\level.txt";
            bool fileExist = File.Exists(path);

            if (fileExist)
            {
                StreamReader reader = new StreamReader(path);

                string result = "";
                result = reader.ReadToEnd();

                level = Int32.Parse(result);
                reader.Close();
            }
            else level = 0;

            CheckLevel();
        }

        /// <summary>
        /// 레벨 저장 메서드
        /// </summary>
        private void SaveLevel()
        {
            string path = @".\level.txt";
            bool fileExist = File.Exists(path);

            if (fileExist)
            {
                File.WriteAllText(path, level.ToString());
            }
            else
            {
                CreateFile();
            }
        }

        /// <summary>
        /// 레벨 체크 메서드
        /// 도전 가능한 레벨 활성화 처리
        /// </summary>
        private void CheckLevel()
        {
            for (int i = 1; i <= 30; i++)
            {
                Controls["button" + i].Enabled = i <= (level + 1);
            }
        }

        /// <summary>
        /// 레벨 선택 메서드
        /// </summary>
        private void SelectLevel(int selectLevel)
        {
            Form2 frm = new Form2(this, selectLevel);
            frm.Show();
            this.Hide();
        }

        /// <summary>
        /// 해당레벨 레벨 클리어 메서드
        /// </summary>
        /// <param name="clearLevel"></param>
        public void ClearLevel(int clearLevel)
        {
            if (clearLevel > level)
            {
                level = clearLevel;
                SaveLevel();
                CheckLevel();
            }
        }
    }
}